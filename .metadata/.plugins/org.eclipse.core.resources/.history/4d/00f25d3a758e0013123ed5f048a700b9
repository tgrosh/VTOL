package com.singletongames.vtol;

import java.util.ArrayList;
import java.util.List;

public class Objective {
	public enum ObjectiveStatus{
		INPROGRESS,
		COMPLETE,
		FAILED
	}
	protected ObjectiveStatus status = ObjectiveStatus.INPROGRESS;
	protected List<IObjectiveListener> listeners = new ArrayList<IObjectiveListener>();
	private boolean notified = false;
	LanderScene scene;
	private String description; 
	int prerequisiteID = -1;
	int objectiveID;
	
	public Objective(LanderScene scene, int objectiveID, String description, IObjectiveListener listener){
		this.objectiveID = objectiveID;
		this.scene = scene;
		this.description = description;		
		this.listeners.add(listener);
	}
	
	public Objective(LanderScene scene, int objectiveID, String description, int prerequisiteID, IObjectiveListener listener){
		this.objectiveID = objectiveID;
		this.scene = scene;
		this.description = description;
		this.prerequisiteID = prerequisiteID;
		this.listeners.add(listener);
	}
		
	public List<IObjectiveListener> getListeners() {
		return listeners;
	}
	
	public void addListener(IObjectiveListener listener) {
		listeners.add(listener);
	}
	
	protected void setComplete(){
		this.status = ObjectiveStatus.COMPLETE;
		if (!notified){
			for (IObjectiveListener listener: listeners){
				listener.onComplete(this);
			}
		}
		notified = true;
	}
	
	protected void setFailed(){
		this.status = ObjectiveStatus.FAILED;
		if (!notified){
			for (IObjectiveListener listener: listeners){
				listener.onFail(this);
			}
		}
		notified = true;
	}

	public String getDescription() {
		return description;
	}

	public void setDescription(String description) {
		this.description = description;
	}

	public int getObjectiveID() {
		return objectiveID;
	}
	
}
